---
mixed-port: 7893
allow-lan: true
bind-address: "*"
mode: rule
log-level: silent
ipv6: true
external-controller: 0.0.0.0:9090
hosts:
  mtalk.google.com: 108.177.125.188
  dl.google.com: 180.163.151.161
  dl.l.google.com: 180.163.151.161
profile:
  store-selected: true
  store-fake-ip: true
dns:
  enable: true
  listen: 0.0.0.0:7874
  default-nameserver:
  - 119.29.29.29
  - 223.5.5.5
  - 223.6.6.6
  - "[2400:3200::1]:53"
  - "[2400:3200:baba::1]:53"
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
  - "*.lan"
  - localhost.ptlogin2.qq.com
  - "+.srv.nintendo.net"
  - "+.stun.playstation.net"
  - "+.msftconnecttest.com"
  - "+.msftncsi.com"
  - "+.xboxlive.com"
  - msftconnecttest.com
  - xbox.*.microsoft.com
  - "*.battlenet.com.cn"
  - "*.battlenet.com"
  - "*.blzstatic.cn"
  - "*.battle.net"
  - "*.wegame.com.cn"
  - "*.localdomain"
  - "*.example"
  - "*.invalid"
  - "*.localhost"
  - "*.test"
  - "*.local"
  - "*.home.arpa"
  - time.*.com
  - time.*.gov
  - time.*.edu.cn
  - time.*.apple.com
  - time-ios.apple.com
  - time1.*.com
  - time2.*.com
  - time3.*.com
  - time4.*.com
  - time5.*.com
  - time6.*.com
  - time7.*.com
  - ntp.*.com
  - ntp1.*.com
  - ntp2.*.com
  - ntp3.*.com
  - ntp4.*.com
  - ntp5.*.com
  - ntp6.*.com
  - ntp7.*.com
  - "*.time.edu.cn"
  - "*.ntp.org.cn"
  - "+.pool.ntp.org"
  - time1.cloud.tencent.com
  - music.163.com
  - "*.music.163.com"
  - "*.126.net"
  - musicapi.taihe.com
  - music.taihe.com
  - songsearch.kugou.com
  - trackercdn.kugou.com
  - "*.kuwo.cn"
  - api-jooxtt.sanook.com
  - api.joox.com
  - joox.com
  - y.qq.com
  - "*.y.qq.com"
  - streamoc.music.tc.qq.com
  - mobileoc.music.tc.qq.com
  - isure.stream.qqmusic.qq.com
  - dl.stream.qqmusic.qq.com
  - aqqmusic.tc.qq.com
  - amobile.music.tc.qq.com
  - "*.xiami.com"
  - "*.music.migu.cn"
  - music.migu.cn
  - msftncsi.com
  - localhost.sec.qq.com
  - "*.n.n.srv.nintendo.net"
  - xbox.*.*.microsoft.com
  - "*.*.xboxlive.com"
  - xnotify.xboxlive.com
  - "+.battlenet.com.cn"
  - "+.wotgame.cn"
  - "+.wggames.cn"
  - "+.wowsgame.cn"
  - "+.wargaming.net"
  - proxy.golang.org
  - stun.*.*
  - stun.*.*.*
  - "+.stun.*.*"
  - "+.stun.*.*.*"
  - "+.stun.*.*.*.*"
  - "+.stun.*.*.*.*.*"
  - heartbeat.belkin.com
  - "*.linksys.com"
  - "*.linksyssmartwifi.com"
  - "*.router.asus.com"
  - mesu.apple.com
  - swscan.apple.com
  - swquery.apple.com
  - swdownload.apple.com
  - swcdn.apple.com
  - swdist.apple.com
  - lens.l.google.com
  - stun.l.google.com
  - "+.nflxvideo.net"
  - "*.square-enix.com"
  - "*.finalfantasyxiv.com"
  - "*.ffxiv.com"
  - "*.ff14.sdo.com"
  - ff.dorado.sdo.com
  - "*.mcdn.bilivideo.cn"
  - "+.media.dssott.com"
  - shark007.net
  nameserver:
  - 223.5.5.5
  - 223.6.6.6
  - "[2400:3200::1]:53"
  - "[2400:3200:baba::1]:53"
  ipv6: true
  fallback:
  - https://sm2.doh.pub/dns-query
  - https://dns.alidns.com/dns-query
  - tls://dot.pub
  - quic://dns.adguard.com
  proxy-server-nameserver:
  - https://sm2.doh.pub/dns-query
  - https://dns.alidns.com/dns-query
  - tls://dot.pub
  - quic://dns.adguard.com
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
    - 0.0.0.0/8
    - 10.0.0.0/8
    - 100.64.0.0/10
    - 127.0.0.0/8
    - 169.254.0.0/16
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 192.0.2.0/24
    - 192.88.99.0/24
    - 192.168.0.0/16
    - 198.18.0.0/15
    - 198.51.100.0/24
    - 203.0.113.0/24
    - 224.0.0.0/4
    - 240.0.0.0/4
    - 255.255.255.255/32
    domain:
    - "+.google.com"
    - "+.facebook.com"
    - "+.youtube.com"
    - "+.githubusercontent.com"
    - "+.googlevideo.com"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - msftconnecttest.com
    - msftncsi.com
proxies:
proxy-providers:
  SSRCLOUD CNIX:
    type: http
    url: 
    interval: 3600
    path: "./proxy_provider/main.yaml"
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  Cordcloud:
    type: http
    url: 
    interval: 3600
    path: "./proxy_provider/backup.yaml"
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
proxy-groups:
- name: "✈️PROXY"
  type: select
  proxies:
  - Auto
  - Manual
- name: Auto
  type: fallback
  proxies:
  - main(Auto)
  - backup(Auto)
  url: http://www.gstatic.com/generate_204
  interval: 300
- name: main(Auto)
  type: url-test
  use:
  - SSRCLOUD CNIX
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 40
  filter: '港 | HK '
- name: backup(Auto)
  type: url-test
  use:
  - Cordcloud
  url: http://www.gstatic.com/generate_204
  interval: 300
  tolerance: 40
  lazy: true
  filter: 港
- name: Manual
  type: select
  proxies:
  - main (Manual)
  - backup (Manual)
- name: main (Manual)
  type: select
  use:
  - SSRCLOUD CNIX
- name: backup (Manual)
  type: select
  use:
  - Cordcloud
- name: Streaming
  type: select
  proxies:
  - "✈️PROXY"
  - DIRECT
- name: StreamingSE
  type: select
  proxies:
  - DIRECT
  - "✈️PROXY"
- name: TikTok
  type: url-test
  use:
  - SSRCLOUD CNIX
  filter: 台湾|TW
  url: https://t.co/Dau0v71Hh7/
  interval: 900
  tolerance: 50
- name: Microsoft
  type: select
  proxies:
  - DIRECT
  - "✈️PROXY"
- name: Steam
  type: select
  proxies:
  - DIRECT
  - "✈️PROXY"
- name: myrule
  type: select
  proxies:
  - "✈️PROXY"
  - DIRECT
- name: domestic
  type: select
  proxies:
  - DIRECT
  - "✈️PROXY"
- name: "\U0001F3AEonline game"
  type: select
  use:
  - SSRCLOUD CNIX
  - Cordcloud
  filter: 游戏
- name: Beat Saber/e-hentai
  type: select
  use:
  - SSRCLOUD CNIX
  - Cordcloud
  filter: 美国
- name: DMM/mgstage
  type: select
  use:
  - SSRCLOUD CNIX
  filter: 日本
- name: javdb
  type: select
  proxies:
  - "✈️PROXY"
  - Manual
- name: DST-PORT
  type: select
  proxies:
  - "✈️PROXY"
  - DIRECT
rule-providers:
  Unbreak:
    type: http
    behavior: classical
    path: "./rule_provider/Unbreak.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Unbreak.yaml
    interval: 86400
  Streaming:
    type: http
    behavior: classical
    path: "./rule_provider/Streaming.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Streaming.yaml
    interval: 86400
  StreamingSE:
    type: http
    behavior: classical
    path: "./rule_provider/StreamingSE.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/StreamingSE.yaml
    interval: 86400
  Global:
    type: http
    behavior: classical
    path: "./rule_provider/Global.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Global.yaml
    interval: 86400
  China:
    type: http
    behavior: classical
    path: "./rule_provider/China.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/China.yaml
    interval: 86400
  ChinaIP:
    type: http
    behavior: ipcidr
    path: "./rule_provider/ChinaIP.yaml"
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
    interval: 86400
  TikTok:
    type: http
    behavior: classical
    path: "./rule_provider/TikTok.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/StreamingMedia/Video/TikTok.yaml
    interval: 86400
  Steam:
    type: http
    behavior: classical
    path: "./rule_provider/Steam.yaml"
    url: https://raw.githubusercontent.com/DivineEngine/Profiles/master/Clash/RuleSet/Extra/Game/Steam.yaml
    interval: 86400
  myrule:
    type: http
    behavior: classical
    path: "./rule_provider/myrule.yaml"
    url: https://raw.githubusercontent.com/zzz6839/PROXY-PROVIDERS-SYNC/zzz6839-patch-1/Myrule.yaml
    interval: 86400
  domestic:
    type: http
    behavior: classical
    path: "./rule_provider/domestic.yaml"
    url: https://raw.githubusercontent.com/zzz6839/PROXY-PROVIDERS-SYNC/zzz6839-patch-1/domestic.yaml
    interval: 86400
  "\U0001F3AEonline game":
    type: http
    behavior: ipcidr
    path: "./rule_provider/onlinegame.yaml"
    url: https://raw.githubusercontent.com/zzz6839/PROXY-PROVIDERS-SYNC/zzz6839-patch-1/onlinegame.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    path: "./rule_provider/Microsoft.yaml"
    url: https://raw.githubusercontent.com/dler-io/Rules/main/Clash/Provider/Microsoft.yaml
    interval: 86400
rules:
- DST-PORT,7895,REJECT
- DST-PORT,7892,REJECT
- IP-CIDR,198.18.0.1/16,REJECT,no-resolve
- DOMAIN-SUFFIX,awesome-hd.me,DIRECT
- DOMAIN-SUFFIX,broadcasthe.net,DIRECT
- DOMAIN-SUFFIX,chdbits.co,DIRECT
- DOMAIN-SUFFIX,classix-unlimited.co.uk,DIRECT
- DOMAIN-SUFFIX,empornium.me,DIRECT
- DOMAIN-SUFFIX,gazellegames.net,DIRECT
- DOMAIN-SUFFIX,hdchina.org,DIRECT
- DOMAIN-SUFFIX,hdsky.me,DIRECT
- DOMAIN-SUFFIX,icetorrent.org,DIRECT
- DOMAIN-SUFFIX,jpopsuki.eu,DIRECT
- DOMAIN-SUFFIX,keepfrds.com,DIRECT
- DOMAIN-SUFFIX,madsrevolution.net,DIRECT
- DOMAIN-SUFFIX,m-team.cc,DIRECT
- DOMAIN-SUFFIX,nanyangpt.com,DIRECT
- DOMAIN-SUFFIX,ncore.cc,DIRECT
- DOMAIN-SUFFIX,open.cd,DIRECT
- DOMAIN-SUFFIX,ourbits.club,DIRECT
- DOMAIN-SUFFIX,passthepopcorn.me,DIRECT
- DOMAIN-SUFFIX,privatehd.to,DIRECT
- DOMAIN-SUFFIX,redacted.ch,DIRECT
- DOMAIN-SUFFIX,springsunday.net,DIRECT
- DOMAIN-SUFFIX,tjupt.org,DIRECT
- DOMAIN-SUFFIX,totheglory.im,DIRECT
- DOMAIN-SUFFIX,smtp,DIRECT
- DOMAIN-KEYWORD,announce,DIRECT
- DOMAIN-KEYWORD,torrent,DIRECT
- DOMAIN-KEYWORD,tracker,DIRECT
- RULE-SET,Unbreak,DIRECT
- RULE-SET,Microsoft,Microsoft
- DOMAIN-KEYWORD,DMM,DMM/mgstage
- DOMAIN-SUFFIX,mgstage.com,DMM/mgstage
- DOMAIN-SUFFIX,beatsaver.com,Beat Saber/e-hentai
- DOMAIN-SUFFIX,bsaber.com,Beat Saber/e-hentai
- DOMAIN-SUFFIX,scoresaber.com,Beat Saber/e-hentai
- DOMAIN-SUFFIX,skystudioapps.com,Beat Saber/e-hentai
- DOMAIN-SUFFIX,e-hentai.org,Beat Saber/e-hentai
- DOMAIN-SUFFIX,javdb.com,javdb
- RULE-SET,myrule,myrule
- RULE-SET,domestic,domestic
- RULE-SET,TikTok,TikTok
- "RULE-SET,\U0001F3AEonline game,\U0001F3AEonline game"
- DOMAIN-SUFFIX,playstation.com,REJECT
- DOMAIN-SUFFIX,playstation.net,REJECT
- DOMAIN-SUFFIX,playstation.org,REJECT
- DOMAIN,playstation.sony.akadns.net,REJECT
- DOMAIN,a192.d.akamai.net,REJECT
- RULE-SET,Streaming,Streaming
- RULE-SET,StreamingSE,StreamingSE
- RULE-SET,Global,✈️PROXY
- RULE-SET,Steam,Steam
- RULE-SET,China,DIRECT
- IP-CIDR,192.168.0.0/16,DIRECT
- IP-CIDR,10.0.0.0/8,DIRECT
- IP-CIDR,172.16.0.0/12,DIRECT
- IP-CIDR,127.0.0.0/8,DIRECT
- IP-CIDR,100.64.0.0/10,DIRECT
- IP-CIDR,224.0.0.0/4,DIRECT
- IP-CIDR,fe80::/10,DIRECT
- RULE-SET,ChinaIP,DIRECT
- IP-CIDR,119.28.28.28/32,DIRECT
- IP-CIDR,182.254.116.0/24,DIRECT
- IP-CIDR,203.205.236.0/24,DIRECT
- IP-CIDR,121.51.40.0/24,DIRECT
- IP-CIDR,101.91.92.0/24,DIRECT
- GEOIP,CN,DIRECT
- DST-PORT,80,DST-PORT
- DST-PORT,443,DST-PORT
- DST-PORT,22,DST-PORT
- MATCH,DIRECT
redir-port: 7892
tproxy-port: 7895
port: 7890
socks-port: 7891
secret: '123456'
external-ui: "/usr/share/openclash/ui"
geodata-mode: false
geodata-loader: memconservative
tcp-concurrent: true
sniffer:
  enable: true
  sniffing:
  - tls
  - http
  force-domain:
  - "+.netflix.com"
  - "+.nflxvideo.net"
  - "+.amazonaws.com"
  - "+.media.dssott.com"
  skip-domain:
  - "+.apple.com"
  - Mijia Cloud
  - "+.jd.com"
  port-whitelist:
  - 443
  - 80
tun:
  enable: true
  stack: gvisor
  device: utun
  auto-route: false
  auto-detect-interface: false
  dns-hijack:
  - tcp://any:53
